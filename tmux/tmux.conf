# Tmux clipboard integration (works in X with xclip installed).
set -g mouse on
set -g set-clipboard on
setw -g mode-keys vi

# Use Ctrl+a as the prefix.
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Mac-style bindings (requires terminal to send Command as Meta).
bind -n M-d split-window -h -c "#{pane_current_path}"
bind -n M-D split-window -v -c "#{pane_current_path}"
bind -n M-t new-window
bind -n M-T new-window
bind -n M-w kill-pane
bind -n M-W kill-window
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9
bind -n M-[ previous-window
bind -n M-] next-window
bind -n M-r source-file ~/.config/tmux/tmux.conf \; display-message "Reloaded ~/.config/tmux/tmux.conf"
bind -n M-f copy-mode \; command-prompt -i -p "search" "send-keys -X search-forward-incremental '%%'"
bind -n M-e choose-tree
bind -n M-s choose-session
bind -n M-z resize-pane -Z
bind -n C-Tab next-window
bind -n C-S-Tab previous-window
# Ghostty remaps Ctrl+Tab to Ctrl+Right/Left.
bind -n C-Right next-window
bind -n C-Left previous-window
bind -n 'C-`' select-pane -t :.+
bind -n 'M-`' select-pane -t :.+
bind -n 'M-~' select-pane -t :.-

# Start window and pane numbering at 1.
set -g base-index 1
setw -g pane-base-index 1

# Copy selection to system clipboard.
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"
bind -T copy-mode y send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# Custom status bar.
set -g status on
set -g status-interval 5
set -g status-position bottom
set -g status-justify left
set -g status-style "bg=colour16,fg=colour250"
set -g status-bg colour16
set -g status-fg colour250
set -g status-left-style "bg=colour16,fg=colour39,bold"
set -g status-right-style "bg=colour16,fg=colour231"
set -g status-left-length 40
set -g status-right-length 120
set -g status-left "#[fg=colour39,bg=colour16,bold] #{session_name} #[fg=colour244,bg=colour16]|"
set -g status-right "#[fg=colour231,bg=colour16]üìà SPX #(~/.local/bin/sp500-ticker) #[fg=colour244,bg=colour16]| #[fg=colour231,bg=colour16]üå™Ô∏è VIX #(~/.local/bin/vix-ticker) #[fg=colour244,bg=colour16]| #[fg=colour231,bg=colour16]üóΩ NY #(TZ=America/New_York date +%%H:%%M) #[fg=colour244,bg=colour16]| #[fg=colour231,bg=colour16]%Y-%m-%d #[fg=colour31,bg=colour16,bold]%H:%M "
setw -g window-status-style "fg=colour244,bg=colour16"
setw -g window-status-format " #I:#W "
setw -g window-status-current-style "fg=colour231,bg=colour31,bold"
setw -g window-status-current-format " #I:#W "
setw -g window-status-separator " "

# TPM (tmux plugin manager)
set -g @plugin 'tmux-plugins/tpm'

run '~/.config/tmux/plugins/tpm/tpm'
